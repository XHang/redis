# 说明：redis的java连接示例
包括以下教程
1.  


## redis的协议
### 简介：  
redis使用了自家创建的一种叫做RESP（REdis Serialization Protocol） 
虽然这种协议是为redis而创建的，但其实还可以用在其他c/s架构的软件上  
RESP协议具有一些特性  
1. 易于实现
2. 快速解释
3. 人类可读
4. 可以序列化很多数据类型，如整数，字符串，数组，还有它自己定义的错误类型。
注：这仅适用于客户端/服务端通信，集群用的是不同的协议  
注：这个是应用层协议。。  

### 过程：  
客户端发送字符串数组（亦或是字节数组？）作为命令传送到服务端，服务端根据不同的命令返回不同的数据类型。
注：在通信的网络层，用的是TCP协议，端口如果是默认的话，那就是6379  
注：虽然RESP不一定需要TCP协议来支撑它，但是在redis的连接协议上，TCP协议是必不可少的  

### 模型：  
其实就是简单的请求-响应模型，你发一个请求，我收一个请求
但是有两个例外
1. jedis提供了管道流，可以批量执行命令而不必等响应过来，协议当然也实现了类似功能。
	可以发送多个请求，稍后再接受响应
2. 如果客户单开启了订阅模式，协议会改变发送的语义并成为推送协议。客户端不必再发送命令，因为服务器端会自动向客户端发送数据。。

### 反馈的数据类型语义：
对于简单字符串，回复的第一个字节是“+”
 对于错误，回复的第一个字节是“ - ”
 对于整数，回复的第一个字节是“：”
 对于批量字符串，答复的第一个字节是“$”
 对于数组，回复的第一个字节是“*”
注：在RESP中，协议的不同部分总是以“\ r \ n”（CRLF行终止符）终止

### 语义举例
#### 简单的字符串
简单字符串用下面的格式进行编码：'+',后面加不能换行的字符串，最后以CRLF('\r\n')结尾
eg:`+ OK\ r\ n`
当客户端接受到服务端发来的简单字符串的反馈时，客户端应该告诉服务端我收到了
也就是客户端要发'+'之后跟着

问题汇总：
1. 第一次安装，连接报错。报错内容非常清楚，去除安全模式或者设置用户名密码   
介绍下使用配置模式去掉redis的安全模式。
第一步: 打开redis的配置文件 redis.conf  
第二步：编辑`bind  127.0.0.1`为`bind  0.0.0.0`  
第三步：编辑`protected-mode yes`为`protected-mode no`  
第四步：保存并退出  
第五步：使用配置文件启动redsi-server:`./src/redis-server redis.conf &`

2.怎么设置redis的连接密码  
还是编辑   `redis.conf`    ，将 `requirepass foobared`注释去掉  
`foobared`填写自己的密码  
注意1：  
一旦设置了密码，要用jedis连接redis进行ser/get操作前，要执行jedis.auth(String password);  进行密码验证
注意2：  
哪怕是本地执行redis命令，也需要执行以下命令才可以操作redis
`auth password`
或者在进入客户端时指定认证密码
`redis-cli -a password`

3. 如何用redis客户端连其他主机的redis
`redis-cli -a password -p port -h host`
